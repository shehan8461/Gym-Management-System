<Page x:Class="GymManagementSystem.Views.Pages.MemberStatusPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:GymManagementSystem.Views.Pages"
      xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
      mc:Ignorable="d" 
      d:DesignHeight="700" d:DesignWidth="900"
      Title="Member Status">

    <Grid Background="#f0f2f5" Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <Border Grid.Row="0" Margin="0,0,0,24" CornerRadius="8" Background="White" Padding="24">
            <Border.Effect>
                <DropShadowEffect Color="#000" BlurRadius="10" ShadowDepth="2" Opacity="0.1"/>
            </Border.Effect>
            <StackPanel Orientation="Horizontal">
                <Border Background="#E91E63" CornerRadius="8" Padding="12" Margin="0,0,16,0">
                    <materialDesign:PackIcon Kind="Fingerprint" Width="28" Height="28" Foreground="White"/>
                </Border>
                <StackPanel VerticalAlignment="Center">
                    <TextBlock Text="Member Identification &amp; Status" FontSize="20" FontWeight="Bold" Foreground="#424242"/>
                    <TextBlock Text="Identify members by fingerprint to check their status" FontSize="14" Foreground="#757575" Margin="0,4,0,0"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Action Area -->
        <Border Grid.Row="1" Background="White" CornerRadius="8" Padding="32" Margin="0,0,0,24">
            <Border.Effect>
                <DropShadowEffect Color="#000" BlurRadius="10" ShadowDepth="2" Opacity="0.1"/>
            </Border.Effect>
            
            <StackPanel HorizontalAlignment="Center">
                <Button x:Name="btnCheckStatus" 
                        Click="btnCheckStatus_Click"
                        Style="{StaticResource MaterialDesignRaisedButton}"
                        Height="60" Width="300"
                        materialDesign:ButtonAssist.CornerRadius="30"
                        Background="#E91E63" BorderBrush="#E91E63"
                        FontSize="18" FontWeight="SemiBold">
                    <StackPanel Orientation="Horizontal">
                        <materialDesign:PackIcon Kind="Fingerprint" Width="28" Height="28" Margin="0,0,12,0"/>
                        <TextBlock Text="CHECK MEMBER STATUS" VerticalAlignment="Center"/>
                    </StackPanel>
                </Button>
                
                <TextBlock x:Name="txtInstructions" 
                           Text="Click the button to start identification mode" 
                           HorizontalAlignment="Center" Margin="0,16,0,0"
                           Foreground="#757575" FontSize="14"/>
                           
                <!-- Scanning Animation/Status (Hidden by default) -->
                <StackPanel x:Name="pnlScanning" Visibility="Collapsed" Margin="0,24,0,0">
                    <ProgressBar Style="{StaticResource MaterialDesignCircularProgressBar}" 
                                 Value="0" IsIndeterminate="True" 
                                 Width="40" Height="40" Foreground="#E91E63"/>
                    <TextBlock Text="Listening for fingerprint events..." 
                               HorizontalAlignment="Center" Margin="0,12,0,0" FontWeight="Medium" Foreground="#E91E63"/>
                    <TextBlock Text="Please ask the member to scan their finger on the device" 
                               HorizontalAlignment="Center" Margin="0,4,0,0" Foreground="#757575"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Result Area (Hidden by default) -->
        <Border x:Name="pnlResult" Grid.Row="2" Visibility="Collapsed" Background="White" CornerRadius="8" Padding="0">
            <Border.Effect>
                <DropShadowEffect Color="#000" BlurRadius="10" ShadowDepth="2" Opacity="0.1"/>
            </Border.Effect>
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="350"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- Left: Profile Summary -->
                <Border Grid.Column="0" Background="#FAFAFA" CornerRadius="8,0,0,8" Padding="24" BorderBrush="#EEEEEE" BorderThickness="0,0,1,0">
                    <StackPanel>
                        <!-- Profile Image Placeholder -->
                        <Border Width="120" Height="120" CornerRadius="60" Background="#E0E0E0" HorizontalAlignment="Center" Margin="0,0,0,16">
                            <materialDesign:PackIcon Kind="Account" Width="60" Height="60" Foreground="#9E9E9E" VerticalAlignment="Center" HorizontalAlignment="Center"/>
                        </Border>
                        
                        <TextBlock x:Name="resName" Text="Member Name" FontSize="22" FontWeight="Bold" HorizontalAlignment="Center" Foreground="#424242"/>
                        <TextBlock x:Name="resId" Text="ID: 1001" FontSize="14" Foreground="#757575" HorizontalAlignment="Center" Margin="0,4,0,0"/>

                        <Border Height="1" Background="#E0E0E0" Margin="0,24"/>

                        <!-- Membership Status -->
                        <StackPanel Margin="0,0,0,16">
                            <TextBlock Text="MEMBERSHIP STATUS" FontSize="12" FontWeight="SemiBold" Foreground="#9E9E9E"/>
                            <Border x:Name="statusBadge" Background="#4CAF50" CornerRadius="12" Padding="12,6" HorizontalAlignment="Left" Margin="0,8,0,0">
                                <TextBlock x:Name="resStatus" Text="ACTIVE" Foreground="White" FontWeight="Bold" FontSize="14"/>
                            </Border>
                        </StackPanel>

                        <!-- Package -->
                        <StackPanel Margin="0,0,0,16">
                            <TextBlock Text="CURRENT PACKAGE" FontSize="12" FontWeight="SemiBold" Foreground="#9E9E9E"/>
                            <TextBlock x:Name="resPackage" Text="Monthly Gold Access" FontSize="16" Foreground="#424242" Margin="0,4,0,0"/>
                        </StackPanel>
                        
                         <!-- Valid Until -->
                        <StackPanel>
                            <TextBlock Text="VALID UNTIL" FontSize="12" FontWeight="SemiBold" Foreground="#9E9E9E"/>
                            <TextBlock x:Name="resExpiry" Text="Oct 15, 2026" FontSize="16" Foreground="#424242" Margin="0,4,0,0"/>
                        </StackPanel>
                    </StackPanel>
                </Border>

                <!-- Right: Recent History -->
                <Grid Grid.Column="1" Margin="24">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <TextBlock Text="Recent Activity" FontSize="18" FontWeight="SemiBold" Foreground="#424242" Margin="0,0,0,16"/>
                    
                    <DataGrid x:Name="dgHistory" Grid.Row="1" AutoGenerateColumns="False" IsReadOnly="True" 
                              HeadersVisibility="Column" Background="Transparent" BorderThickness="0">
                        <DataGrid.Columns>
                            <DataGridTextColumn Header="Date" Binding="{Binding CheckInTime, StringFormat='MMM dd, yyyy'}" Width="120"/>
                            <DataGridTextColumn Header="Time" Binding="{Binding CheckInTime, StringFormat='hh:mm tt'}" Width="100"/>
                             <DataGridTextColumn Header="Type" Binding="{Binding Type}" Width="*"/>
                        </DataGrid.Columns>
                    </DataGrid>
                </Grid>
            </Grid>
        </Border>
    </Grid>
</Page>
